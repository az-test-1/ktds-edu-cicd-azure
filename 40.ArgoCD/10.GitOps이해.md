# GitOps

GitOps는 Git을 단일 진실의 원천(Single Source of Truth)으로 사용하여 애플리케이션 및 인프라를 선언적 방식으로 관리하는 접근 방식입니다. GitOps는 DevOps의 확장으로, Git을 통해 인프라와 애플리케이션의 상태를 관리하고 자동화된 배포 파이프라인을 구축합니다.

## 주요 개념

1. **선언적 구성**: 인프라와 애플리케이션의 상태를 선언적 구성 파일(YAML, JSON 등)로 정의합니다.
2. **Git을 단일 진실의 원천으로 사용**: 모든 구성 파일을 Git 리포지토리에 저장하고, Git의 버전 관리 기능을 활용하여 변경 이력을 추적합니다.
3. **자동화된 동기화**: Git 리포지토리의 상태와 실제 클러스터의 상태를 자동으로 동기화합니다. 이를 위해 ArgoCD, Flux와 같은 도구를 사용합니다.
4. **감사 및 롤백**: Git의 변경 이력을 통해 누가, 언제, 무엇을 변경했는지 추적할 수 있으며, 필요시 이전 상태로 롤백할 수 있습니다.

## GitOps의 장점

- **버전 관리**: 모든 변경 사항이 Git에 기록되어 변경 이력을 쉽게 추적할 수 있습니다.
- **자동화**: 선언적 구성과 자동화된 동기화를 통해 수동 작업을 줄이고, 일관된 배포를 보장합니다.
- **협업**: Git을 통해 팀 간 협업이 용이해지고, 코드 리뷰 및 승인 프로세스를 통해 품질을 보장할 수 있습니다.
- **안정성**: 선언적 구성과 자동화된 동기화를 통해 인프라와 애플리케이션의 상태를 일관되게 유지할 수 있습니다.

## GitOps 워크플로우

1. **구성 파일 작성**: 애플리케이션 및 인프라의 선언적 구성 파일을 작성합니다.
2. **Git 리포지토리에 커밋**: 구성 파일을 Git 리포지토리에 커밋하고 푸시합니다.
3. **자동화 도구 설정**: ArgoCD, Flux와 같은 GitOps 도구를 사용하여 Git 리포지토리와 클러스터를 동기화합니다.
4. **자동 동기화**: GitOps 도구가 Git 리포지토리의 변경 사항을 감지하고, 클러스터의 상태를 자동으로 업데이트합니다.
5. **모니터링 및 롤백**: 변경 사항을 모니터링하고, 필요시 이전 상태로 롤백할 수 있습니다.

## GitOps 도구

- **ArgoCD**: Kubernetes 네이티브 GitOps 도구로, Git 리포지토리와 Kubernetes 클러스터를 동기화합니다.
- **Flux**: Weaveworks에서 개발한 GitOps 도구로, Kubernetes 클러스터와 Git 리포지토리를 동기화합니다.

## 요약

GitOps는 Git을 단일 진실의 원천으로 사용하여 애플리케이션 및 인프라를 선언적 방식으로 관리하는 접근 방식입니다. GitOps는 버전 관리, 자동화, 협업, 안정성 등의 장점을 제공하며, ArgoCD와 Flux와 같은 도구를 사용하여 구현할 수 있습니다.

## 참고사이트

- [Azure Kubernetes Service용 GitOps](https://learn.microsoft.com/ko-kr/azure/architecture/example-scenario/gitops-aks/gitops-blueprint-aks)
- [What is GitOps?](https://about.gitlab.com/topics/gitops/)

# ArgoCD

ArgoCD는 Kubernetes 네이티브 GitOps 도구로, Git 리포지토리를 단일 진실의 원천(Single Source of Truth)으로 사용하여 Kubernetes 클러스터의 애플리케이션을 자동으로 배포하고 관리합니다. ArgoCD는 선언적 구성 파일을 사용하여 애플리케이션의 상태를 정의하고, Git 리포지토리와 Kubernetes 클러스터 간의 상태를 동기화합니다.

## 주요 기능

- **자동 동기화**: Git 리포지토리의 변경 사항을 감지하고, Kubernetes 클러스터의 상태를 자동으로 업데이트합니다.
- **선언적 구성**: 애플리케이션의 상태를 YAML 또는 JSON 파일로 선언적으로 정의합니다.
- **웹 UI 및 CLI**: 사용자 친화적인 웹 UI와 강력한 CLI를 제공하여 애플리케이션을 관리할 수 있습니다.
- **RBAC**: 역할 기반 접근 제어(RBAC)를 통해 사용자 권한을 관리할 수 있습니다.
- **헬스 체크 및 롤백**: 애플리케이션의 상태를 모니터링하고, 필요시 이전 상태로 롤백할 수 있습니다.
- **다중 클러스터 지원**: 여러 Kubernetes 클러스터를 관리할 수 있습니다.

## ArgoCD 아키텍처

ArgoCD는 다음과 같은 주요 구성 요소로 이루어져 있습니다:

- **API 서버**: ArgoCD의 핵심 API를 제공하며, 웹 UI와 CLI를 통해 상호작용합니다.
- **레포지토리 서버**: Git 리포지토리와 상호작용하여 애플리케이션의 선언적 구성을 가져옵니다.
- **애플리케이션 컨트롤러**: 애플리케이션의 상태를 모니터링하고, Git 리포지토리와 Kubernetes 클러스터 간의 상태를 동기화합니다.
- **Dex**: SSO(Single Sign-On) 및 OAuth2 인증을 지원합니다.
- **Notification 서버**: 애플리케이션 상태 변경, 동기화 상태, 헬스 체크 결과 등과 같은 이벤트에 대해 알림을 제공합니다.
- **Redis**: 캐싱 및 세션 관리를 담당하여 성능을 향상시킵니다.

## 요약

ArgoCD는 Kubernetes 네이티브 GitOps 도구로, Git 리포지토리를 단일 진실의 원천으로 사용하여 Kubernetes 클러스터의 애플리케이션을 자동으로 배포하고 관리합니다. ArgoCD는 자동 동기화, 선언적 구성, 웹 UI 및 CLI, RBAC, 헬스 체크 및 롤백, 다중 클러스터 지원 등의 기능을 제공합니다. ArgoCD를 사용하면 Kubernetes 애플리케이션의 배포 및 관리를 효율적으로 수행할 수 있습니다.

## 참고사이트

- [ArgoCD Overview](https://argo-cd.readthedocs.io/en/stable/)